const inputNameCocktail=document.querySelector(".js-searchInput"),searchButton=document.querySelector(".js-searchButton"),reset=document.querySelector(".js-formReset"),resultList=document.querySelector(".js-main-list"),favoriteList=document.querySelector(".js-main-listfav"),resetFav=document.querySelector(".js-favReset"),defaultImage="https://via.placeholder.com/210x295/ffffff/666666/?text=TV",faviconSelector="js-favicon";let drinks=[],favorites=[];function handleClick(){connectApi()}function connectApi(){let e=inputNameCocktail.value.toLowerCase();fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s="+e).then(e=>e.json()).then(e=>{drinks=e.drinks.map(e=>({idDrink:e.idDrink,strDrink:e.strDrink,strDrinkThumb:e.strDrinkThumb})),paintDrinks()})}function paintDrinks(){let e="";for(const t of drinks)""!==t.strDrinkThumb?e+=`\n          <li id="${t.idDrink}" class="js-cocktail">\n          <h2 class="js-titleDrink">${t.strDrink}</h2>\n          <img class="js-image" src="${t.strDrinkThumb}">\n          </li>`:e+=`\n        <li id="${t.idDrink}" class="js-cocktail">\n        <h2 class="js-titleDrink">${t.strDrink}</h2>\n        <img class="js-image" src="${defaultImage}">\n        </li>`;resultList.innerHTML=e,listenListDrinks()}function listenListDrinks(){const e=document.querySelectorAll(".js-cocktail");for(const t of e)t.addEventListener("click",getFavDrinks)}function getFavDrinks(e){const t=parseInt(e.currentTarget.id),i=drinks.find(e=>e.idDrink==t),n=favorites.findIndex(e=>e.idDrink==t);-1===n?favorites.push(i):favorites.splice(n,1),console.log(favorites),setLocalStorage(),paintFavorites()}function paintFavorites(){let e="";for(const t of favorites)" "!==t.strDrinkThumb?e+=`\n                    <li class= "js-selectedDrink" id="${t.idDrink}">\n                    <h2 class="js-titleDrink">${t.strDrink}</h2>\n                    <img class="js-image" src="${t.strDrinkThumb}"/>\n                    <i id="${t.idDrink}" class="fa-solid fa-heart js-favicon"></i>\n                    </li>`:e+=`\n                          <li class= "js-selectedDrink" id="${t.idDrink}">\n                          <h2>${t.strDrink}</h2> \n                          <img class="js-image" src="${defaultImage}"/>\n                          <i id="${t.idDrink}" class="fa-solid fa-heart js-favicon"></i>\n                          </li>`;favoriteList.innerHTML=e,document.querySelectorAll(".js-favicon").forEach(e=>e.addEventListener("click",handleFavIconClick))}function resetLocalStorage(){favorites=[],localStorage.clear(),location.reload()}function resetMainList(){drinks=[],location.reload()}function setLocalStorage(){localStorage.setItem("selected",JSON.stringify(favorites))}function getLocalStorage(){favorites=JSON.parse(localStorage.getItem("selected")),paintFavorites()}function handleFavIconClick(e){const t=parseInt(e.currentTarget.parentElement.id);-1!==favorites.findIndex(e=>e.idDrink==t)&&(favorites=favorites.filter(e=>parseInt(e.idDrink)!==t),setLocalStorage(),paintFavorites())}searchButton.addEventListener("click",handleClick),reset.addEventListener("click",resetMainList),resetFav.addEventListener("click",resetLocalStorage),null!==localStorage.getItem("selected")&&getLocalStorage();